layout: true
class: center, middle, footer

---

# Refaktorieren oder grüne Wiese?

Die Reise von opencaching.de von einer Legacy Applikation zu Symfony Full Stack mit Responsive Webdesign.

[![:scaleImg 25%](/static/img/oc-logo.svg)](https://www.opencaching.de/)

Referent: Thomas Eiling @teiling88

---


## Wer bin ich?
.left-column[[![:scaleImg 75%](/static/img/profilbild_thomas_eiling.jpg)](https://www.thomas-eiling.de/)]
.right-column.single-center-column-fit.leftalign[
* Thomas Eiling
* Entwicklungsleiter und 2. Vorsitzender Opencaching e.V.
* bei Opencaching.de in der Entwicklung aktiv seit 2016
]

---

# Danke!

[![:scaleImg 25%](/static/img/sw_logo_white.svg)](https://www.shopware.com/)

---

## Was ist Opencaching?
.single-center-column-fit.leftalign[
* eine der weltweit bedeutendsten Geocaching-Plattformen
* eine kostenfreie und offene alternative zu geocaching.com
* nicht kommerziell und spendenbasiert
* es existieren verschiedene Länderknoten die eine Zentrale API haben (okapi)
]

---

## opencaching.de in Zahlen

.single-center-column-fit.leftalign[

* Listingplattform
    * ca. 72.000  Caches
    * ca. 78.000 regstrierte Mitglieder


* Forum
    * ca. 60.000 Beiträge
    * ca. 1900 registrierte Mitgleider
    
    
* Wiki
    * ca. 250 Artikel

]

---

## Das Team hinter opencaching.de

.single-center-column-fit.leftalign[

* Opencaching Deutschland e.V.
    * 18 ordentliche Mitgleider
        * davon 3 Vorstandsmitglieder
    
        
* Team Opencaching.de
    * \> 10 Teammitglieder
    * 5 Entwickler
    
]

---

## Status Quo im Jahr 2016

.single-center-column-fit.leftalign[

* kompliziert einzurichtende Entwicklungsumgebung 
* php 5.4 Sprachlevel
* Drittanbieter Librarys sind im Repo eingebunden (smarty, okapi, HTMLPurifier)
* kein continuous integration Prozess
* keine automatisierten Tests
* 231.900 Zeilen Quellcode
]

---

## Contributors bis 2016

[![:scaleImg 65%](/static/img/contributors_2016.png)](https://github.com/OpencachingDeutschland/oc-server3)

---

## neue Entwickler VM

.single-center-column-fit.leftalign[
* basierend auf Vagrant
* centOS als Betriebssystem
* php5.6
* automatisierte Einrichtung
]

---

## Composer

.single-center-column-fit.leftalign[
* Umsetzung PSR1/2 Standard
* Smarty und HTML-Purifier via composer eingebunden
* Basis für Symfony Integration gelegt
]

---

## Scrutinizer

.single-center-column-fit.leftalign[
* Start Score: &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 5,26
* Aktueller Score: &nbsp; 6,67
]

---

## Symfony

.single-center-column-fit.leftalign[
* Umsetzung von Fieldnotes
* Unterstützung des alten Designs
* Bereitstellung einer Dbal-Connection für Legacy Code
* Umsetzung von ersten neuen Funktionen wie z.B. das Changelog
]

---

## crowdin

.single-center-column-fit.leftalign[
* deutlich einfacherer Übersetzungsworkflow
* 42 % aller Snippets sind vollständig lokalisiert<br><br>
    * Deutsch 100 %    
    * Niederländisch 31 %
    * Französisch 100 %
    * Italienisch 65 %
    * Russisch 14 %
    * Spanish 73 % 
    * Griechisch 0 %
    * Polnisch 0 %
    * Arabisch 0 %
]

---

## Travis und psh.phar

.single-center-column-fit.leftalign[
* PHP Shell Helper entwickelt von Jan Philipp Pietrzyk
    * nimmt Basis Aufgaben ab um Shell Scripte optimaler einzusetzen
    * Möglichkeit von verschiedenen Environments
* Travis Ci
    * Installation der Software auf einem Agent
    * Ausführung und Validierung der automatischen Tests
    * Update der Crowdin Snippets bei einem merge
]

---

## Auslagerung der Okapi

.single-center-column-fit.leftalign[
* 143 Commits
* 53.399 hinzugefügte Zeilen Quellcode
* 52.720 gelöschte Zeilen Quellcode
* Einführung von PSR 4
* Einbindung des composer autoloaders
* leider kein Dependency Injection Container
]

---

## Status quo heute

.single-center-column-fit.leftalign[
* 558.692 Zeilen Quellcode 
* zweigleisiges Frontend (neues und altes Design)
]

---

## Contributors 2016 bis heute

[![:scaleImg 75%](/static/img/contributors_actuall.png)](https://github.com/OpencachingDeutschland/oc-server3)

---

## Sponsoren

.single-center-column-fit.leftalign[
* Atlassian
* BrowserStack
* CrowdIn
* HostEurope
* JetBrains PHPStorm
* Sentry
* Scrutinizer (Security Checks)
* Travis-Ci
* Codecov
]

---



## Ausblick

.single-center-column-fit.leftalign[
* weiterer Ausbau der neuen Oberfläche
* neuer Datenimport um Founds von Doppellistings abzugleichen
* verbesserte Unit Tests 
* Generierung besserer Demodaten
* neue Funtkionen für die Nutzer
]

---


# Danke!
